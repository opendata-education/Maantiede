
<!DOCTYPE html>

<html lang="fi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>1854 - John Snow ja kolera &#8212; Maantiede</title>
    
  <link rel="stylesheet" href="../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.e7340bb3dbd8dde6db86f25597f54a1b.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/translations.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.7d483ff0a819d6edff12ce0b1ead3928.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://opendata-education.github.io/Maantiede/intro.html/harjoitukset/1854_koleraepidemia.html" />
    <link rel="shortcut icon" href="../_static/logo.png"/>
    <link rel="index" title="Sisällysluettelo" href="../genindex.html" />
    <link rel="search" title="Etsi" href="../search.html" />
    <link rel="prev" title="Lyhimmän reitin analyysi" href="lyhimman_reitin_analyysi.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />


<!-- Opengraph tags -->
<meta property="og:url"         content="https://opendata-education.github.io/Maantiede/intro.html/harjoitukset/1854_koleraepidemia.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="1854 - John Snow ja kolera" />
<meta property="og:description" content="1854 - John Snow ja kolera    Kulkutaudit, nuo ihmiskunnan ikiaikaiset kumppanit, olivat suuria katastrofeja ennen moderneja hoitokeinoja tai ymmärrystä hygieni" />
<meta property="og:image"       content="https://opendata-education.github.io/Maantiede/intro.html/_static/logo.png" />

<meta name="twitter:card" content="summary" />


  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Maantiede</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Hae tästä kirjasta ..." aria-label="Hae tästä kirjasta ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Tervetuloa avoimen datan pariin
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Harjoitukset
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="maailmankartta.html">
   Datan esittäminen kartalla
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="interaktiivinen_kartta.html">
   Interaktiiviset kartat
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lampotila_sademaara.html">
   Lämpötila ja sademäärä
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="openstreetmap.html">
   Open Street Map
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lyhimman_reitin_analyysi.html">
   Lyhimmän reitin analyysi
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   1854 - John Snow ja kolera
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Vaihda navigointia" aria-controls="site-navigation"
                title="Vaihda navigointia" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Lataa tämä sivu"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/harjoitukset/1854_koleraepidemia.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Lataa lähdetiedosto" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Tulosta PDF-tiedostoon"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/opendata-education/Maantiede"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Lähteen arkisto"><i
                    class="fab fa-github"></i>arkisto</button></a>
        <a class="issues-button"
            href="https://github.com/opendata-education/Maantiede/issues/new?title=Issue%20on%20page%20%2Fharjoitukset/1854_koleraepidemia.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Avaa ongelma"><i class="fas fa-lightbulb"></i>avoin ongelma</button></a>
        
    </div>
</div>


            <!-- Full screen (wrap in <a> to have style consistency -->
            <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                    data-placement="bottom" onclick="toggleFullScreen()" aria-label="Koko näytön tila"
                    title="Koko näytön tila"><i
                        class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/opendata-education/Maantiede/main?urlpath=tree/materiaali/harjoitukset/1854_koleraepidemia.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Tuoda markkinoille Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i>
            Sisällys
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#vesi-valttamaton-mutta-vaarallinen-aine">
   Vesi - välttämätön, mutta vaarallinen aine
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pumput-saastumislahteet-ja-terveysmaantiede">
   Pumput - saastumislähteet ja terveysmaantiede
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#epilogi-kohti-sanitaarisempaa-nykypaivaa">
   Epilogi - kohti sanitaarisempaa nykypäivää
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lisaa-luettavaa">
   Lisää luettavaa:
  </a>
 </li>
</ul>

        </nav>
        
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="john-snow-ja-kolera">
<h1>1854 - John Snow ja kolera<a class="headerlink" href="#john-snow-ja-kolera" title="Permalink to this headline">¶</a></h1>
<img alt="https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/John_Snow.jpg/800px-John_Snow.jpg" class="align-right" src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/John_Snow.jpg/800px-John_Snow.jpg" />
<p>Kulkutaudit, nuo ihmiskunnan ikiaikaiset kumppanit, olivat suuria katastrofeja ennen moderneja hoitokeinoja tai ymmärrystä hygienian tärkeydestä. 1800-luvun alkupuoliskolla pelättiin etenkin koleraa, kuivattavaa suolistotautia joka saattoi tappaa terveenkin aikuisen yhtäkkiä jopa keskelle tietä. Sille ominainen kalvaan sinertävä iho vaani monien painajaisissa eikä kukaan, rikas tai köyhä, ollut suojassa sen tuhoilta. Pandemiat kaatoivat väkeä aina Intiasta Kanadaan. Pelkästään Isossa-Britanniassa kuoli kymmeniä tuhansia sen riuduttamana, Venäjällä yli miljoona. Suomessakin koettiin kolmeen otteeseen 1830-50 -luvuilla rajuja aaltoja, joista mm. 1853 epidemia tappoi 10% Hämeenlinnan väestöstä.</p>
<p>Pian inhimillisen kärsimyksen keskeltä nousisi kuitenkin uusi ymmärrys taudinaiheuttajista, tilastotieteen käytöstä terveydenhuollossa sekä epidemiologian tutkimusala, jonka avulla kolera ja monet muut taudit saataisiin talttumaan. Tämän liikkeen kärjestä löytyy nuori englantilainen lääkäri, John Snow (joka tiesi aika paljonkin juttuja).</p>
<p>Ennen Louis Pasteurin 1860-luvun todisteita mikrobien roolista tautien synnyssä, suurin osa ihmisistä vannoi ”miasman” eli saastuneen ilman nimeen taudinaiheuttajana jos mihinkin vaivaan. Snow kannatti näkemystä, jossa taudinaiheuttajat saattoivat sen sijaan olla itsensä replikointiin kykeneviä biologisia olioita, esimerkiksi bakteereja, kuten nykyään tiedetään todeksi. Miasman väitettiin saavan alkunsa hautuumailta, soilta, kaatopaikoilta ja muilta ikäviltä alueilta, mutta se toimi epätyydyttävänä käsienheilutteluvastauksena lähes missä tahansa missä oli likaa ja ihmisiä. Kolerabakteeri sinänsä (<em>Vibrio cholerae</em>) kuvattiin italialaisen Filippo Pacinin toimesta jo 1854, mutta löytöä ei juuri noteerattu ennen Robert Kochin 1883 töitä, jolloin mikrobiteoria oli jo löytänyt tiensä tieteen valtavirtaan.</p>
<p>Tässä harjoitteessa tarkastellaan kahta epidemiatapausta Lontoossa, joiden pohjalta Snow ja muut pystyivät osoittamaan koleran leviävän saastuneen veden kautta. Kannattaa myös alkuun katsoa Extra Historyn erinomainen kolmen videon ”Broad Street Pump” -sarja Youtubesta asian pohjustuksena: https://www.youtube.com/watch?v=TLpzHHbFrHY (vie noin ~20 minuuttia, mush!)</p>
<div class="section" id="vesi-valttamaton-mutta-vaarallinen-aine">
<h2>Vesi - välttämätön, mutta vaarallinen aine<a class="headerlink" href="#vesi-valttamaton-mutta-vaarallinen-aine" title="Permalink to this headline">¶</a></h2>
<p>Ihminen tarvitsee jatkuvasti vettä, eikä ole yllätys että vedenpumppaamot ovat olleet oleellisessa roolissa teollistuneen yhteiskunnan rakentumisessa. Moderni ihminen ymmärtää välttää likaista vettä, mutta 1800-luvulla oli yhä täysin normaalia kaataa niin ulosteet, ruuantähteet kuin teollisuusjätteetkin suoraan lähimpään vesistöön. Lontoota halkova suuri Thames-joki, josta miljoonakaupungin juomavesi nostettiin, oli samalla kaupungin viemärijärjestelmien, tehtaiden ja asukkaiden laskupaikka, joka haisi kuvottavalta. Ajan ajattelulle oli ominaista kuvitella taudinaiheuttajia jonkinlaisina myrkkyinä, jotka laimenisivat olemattomiin joen kokoisessa virrassa. Replikoituva bakteeri, joka lisääntyisi vaarallisiin määriin pienestäkin kontaminaatiosta, oli vieras käsite.</p>
<p>Oireiden alkaminen vatsakivuilla viittasi John Snown mielestä nieltyyn taudinaiheuttajaan (verrattuna hengitettyyn miasmaan) ja hän alkoikin tarkastella törkyisten viemärivalumien vaikutusta tilastoituihin tapauksiin. Eräällä kadulla toisen puolen jätteen virtasivat kohti kaivoa, toisella poispäin. Kun lähes kaikki alueen sairastapaukset olivat sillä puolen, missä jäte valui kaivon luo, hän vakuuttui itse juomaveden tärkeydestä taudin leviämisessä. Kuten arvata saattaa, juuri kukaan ei uskonut häntä.</p>
<p>Pian tarjoutui kuitenkin uusi tilaisuus: etelä-Lontoossa roihahti joukko uusia tapauksia, joita Snow lähti tutkimaan jakamalla ne vedenjakeluyhtiöiden mukaan. Alueella vaikutti kaksi firmaa: Southwark &amp; Vauxhall sekä Lambeth. Näistä Southwark &amp; Vauxhallin käsittelylaitos sijaitsi alavirtaan suuresta viemärin laskuaukosta, siinä missä Lambethin vesi tuli ylempää Thamesista.</p>
<p>Tehdään simulaatio aiheesta. Ohjelmointiaika!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># AJA NÄMÄ PAKETIT ENSIN</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">random</span> <span class="k">as</span> <span class="nn">rnd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Luodaan joukko satunnaisia kotitalouksia, joille arvotaan vedenjakelija ja karttakoordinaatit 100 x 100 kartalla.</span>

<span class="n">n</span> <span class="o">=</span> <span class="mi">100</span> <span class="c1"># talouksien määrä, vaikuttaako määrä tuloksiin?</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
    <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">rnd</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">),</span> <span class="n">rnd</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">),</span> <span class="n">rnd</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;Southwark and Vauxhall Co.&quot;</span><span class="p">,</span> <span class="s2">&quot;Lambeth Co.&quot;</span><span class="p">]),</span> <span class="s1">&#39;No&#39;</span><span class="p">]</span>
    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Location X&#39;</span><span class="p">,</span> <span class="s1">&#39;Location Y&#39;</span><span class="p">,</span> <span class="s1">&#39;Water supplier&#39;</span><span class="p">,</span> <span class="s1">&#39;Fatality&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Arvotaan tässä, millä todennäköisyydellä eri pumppaamojen asiakkaat kokevat kuolemantapauksia.</span>
<span class="c1"># Tämä solu heittää ajettaessa varoitusviestiä, mikä ei haittaa mitään sen toiminnan kannalta.</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">while</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">rnd</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span> <span class="c1"># arpoo prosenttiluvun kullekin talolle</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Water supplier&#39;</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Lambeth Co.&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span> <span class="c1"># vertaa tartuntariskiin</span>
            <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Fatality&#39;</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Yes&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Water supplier&#39;</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Southwark and Vauxhall Co.&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="mi">70</span><span class="p">:</span>
            <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Fatality&#39;</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Yes&quot;</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tarkastellaan miltä kotitalouksien tiedot näyttävät.</span>

<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Eritellään taloudet vedentarjoajien mukaan ja tarkastellaan tämänkertaista kuolleisuuslukua.</span>

<span class="n">L</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Water supplier&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Lambeth Co.&quot;</span><span class="p">]</span>
<span class="n">SV</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Water supplier&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Southwark and Vauxhall Co.&quot;</span><span class="p">]</span>

<span class="n">mL</span> <span class="o">=</span> <span class="n">L</span><span class="p">[</span><span class="n">L</span><span class="p">[</span><span class="s2">&quot;Fatality&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Yes&quot;</span><span class="p">]</span>
<span class="n">mSV</span> <span class="o">=</span> <span class="n">SV</span><span class="p">[</span><span class="n">SV</span><span class="p">[</span><span class="s2">&quot;Fatality&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Yes&quot;</span><span class="p">]</span>

<span class="n">pL</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mL</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">pSV</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mSV</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">SV</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
             
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Lambethin kuolleisuus on &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">pL</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;% &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; taloudesta.&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Southwark and Vauxhallin kuolleisuus on &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">pSV</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;% &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">SV</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; taloudesta.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Laitetaan äskeiset tiedot kartalle visualisaation helpottamiseksi. Mitä mustat tähdet kuvaavat?</span>
<span class="c1"># Karttapohja on tässä simulaatiossa vain koriste, palaamme siihen myöhemmin.</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&quot;../kuvat/snowmap_1854.png&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">121</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">mL</span><span class="p">[</span><span class="s2">&quot;Location X&quot;</span><span class="p">],</span> <span class="n">mL</span><span class="p">[</span><span class="s2">&quot;Location Y&quot;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">marker</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">250</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">L</span><span class="p">[</span><span class="s2">&quot;Location X&quot;</span><span class="p">],</span> <span class="n">L</span><span class="p">[</span><span class="s2">&quot;Location Y&quot;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Lambethilta juovat </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>


<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">122</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">mSV</span><span class="p">[</span><span class="s2">&quot;Location X&quot;</span><span class="p">],</span> <span class="n">mSV</span><span class="p">[</span><span class="s2">&quot;Location Y&quot;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">marker</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">250</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">SV</span><span class="p">[</span><span class="s2">&quot;Location X&quot;</span><span class="p">],</span> <span class="n">SV</span><span class="p">[</span><span class="s2">&quot;Location Y&quot;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Southwark and Vauxhallilta juovat </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Tapauksessa, jota Snow tutki, kuukauden 44 koleraan kuolleesta jako Southwark &amp; Vauxhallin ja Lambethin asiakkaiden välillä oli 38/6. Oli selvää, että hän oli oikeilla jäljillä ja toinen pumppaamoista tarjosi saastuneempaa vettä.</p>
<p><strong>Tehtävä 1:</strong></p>
<p>Jos oletetaan, että keskiverrolla kaupunkilaisella oli vaikkapa 5 % sauma saada tauti toista kautta, millainen todennäköisyys sairastua yksittäisellä Southwarkin &amp; Vauxhallin veden juojalla pitäisi suunnilleen olla tuon 38/6 suhteen saamiseksi? Kokeile haarukoida yllä olevilla koodisoluilla numeerisesti (huomaa toki, että ns. ”oikeilla” luvuillakin voi tulla erilaisia tuloksia, kun kyseessä on satunnainen otos).</p>
<p>Valitettavasti kiire kutsui tohtoriamme kohti operaation seuraavaa osaa ennen näiden tietojen kunnollista julkaisua: Sohon kaupunginosassa, Broad Streetillä (nyk. Broadwick Street) räjähti syyskuun 1854 alussa päälle täysi paniikki ihmisten kuollessa kovempaa tahtia kuin ruumisarkkuja ehdittiin kantaa pois.</p>
</div>
<div class="section" id="pumput-saastumislahteet-ja-terveysmaantiede">
<h2>Pumput - saastumislähteet ja terveysmaantiede<a class="headerlink" href="#pumput-saastumislahteet-ja-terveysmaantiede" title="Permalink to this headline">¶</a></h2>
<p>Tässä osiossa käytetään autenttisia tietoja tapahtumista elo-syyskuussa 1854.</p>
<p>John Snow kuuli asiasta 4.9. ja käytti seuraavat kolme päivää juosten ympäriinsä keräämässä aineistoa, piirtäen karttoja ja vakuuttaen paikallishallintoa tarpeellisista vastatoimista. Jokainen tuhlattu hetki tarkoitti lisää tartuntoja ja kuolleita.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># AJA NÄMÄ PAKETIT ENSIN, JOLLET AJANUT EDELLISTÄ OSIOTA</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">random</span> <span class="k">as</span> <span class="nn">rnd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Historiallinen data, joka on kerätty Robin Wilsonin julkaisemista paketeista </span>
<span class="c1"># täältä http://blog.rtwilson.com/john-snows-cholera-data-in-more-formats/</span>

<span class="n">ajat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;../data/johnsnow_dataset_dates_all.csv&quot;</span><span class="p">)</span>
<span class="n">kuolinluvut</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;../data/johnsnow_dataset_deaths.csv&quot;</span><span class="p">)</span>
<span class="n">pumput</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;../data/johnsnow_dataset_pumps_names.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tästä nähdään tapahtumien aikakehitys.</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ajat</span><span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">],</span> <span class="n">ajat</span><span class="p">[</span><span class="s2">&quot;attacks&quot;</span><span class="p">],</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Sairastumiset&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ajat</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">],</span> <span class="n">ajat</span><span class="p">[</span><span class="s1">&#39;deaths&#39;</span><span class="p">],</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Kuolemat&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="s1">&#39;45&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Päivittäiset uudet tapaukset </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Yllä olevasta kuvaajasta nähdään naapuruston sairastapausten räjähtävän käsiin kuun taitteessa. Myöhemmissä arvioissa Snow on uskonut taudin olleen jo luonnostaan laskussa toimiensa aikaan (esimerkiksi ihmisten karattua paikalta), mutta jotain ratkaisevaa tapahtuu 8.9., mikä katkaisee isomman leviämisen lähes samantien.</p>
<p>Snow kiersi paikanpäällä aikansa, mutta yhden ihmisen tiedonkeruuoperaatio kuolevien ihmisten, paetessa hylättyjen talojen ja yleisen kaaoksen keskellä olisi tullut liian hitaaksi. Sen sijaan tohtorimme kääntyi tehokkaampaan suuntaan ja marssi paikallisen tilastokeskuksen, Office of Register Generalin, puheille ja vaati käyttöönsä kaikkien kuolemantapausten ajat ja osoitteet. Alla on alueen kartta, mihin hän merkkasi kuolleet mustina vaakaviivoina kuin vierekkäiset hauta-arkut pihoille.</p>
<img alt="https://upload.wikimedia.org/wikipedia/commons/2/27/Snow-cholera-map-1.jpg" src="https://upload.wikimedia.org/wikipedia/commons/2/27/Snow-cholera-map-1.jpg" />
<p><strong>Tehtävä 2:</strong></p>
<p>Katsomalla yllä olevaa karttaa, mitä voit sanoa kuolintapausten asettumisesta kartalle?</p>
<p>Miksi puolen tuhatta työläistä asuttanut köyhäintalo (work house) kärsi vain muutamia tapauksia?</p>
<p>Miksi uhreja vilisevän alueen keskellä oleva olutpanimo (brewery) ei kärsinyt yhtäkään?</p>
<p>Matemaattisesti nohevana kaverina Snow sovelsi ylläolevaan kuvaan aikanaan vielä melko tuntematonta menetelmää, eli pistetiheyden kartoitusta ja myöhemmin <a class="reference external" href="https://fi.wikipedia.org/wiki/Voronoin_diagrammi">Voronoin</a> diagrammina tunnetuksi tulevaa ajatusta, jossa karttaan muodostuu alueita joiden kaikista pisteistä on lyhin matka johonkin tiettyyn paikkaan. Snown aiempi aavistus vedenjakelun vaikutuksesta äkillisiin tautipurkauksiin ohjasi silmän nopeasti oikeaan paikkaan:</p>
<p>Mikä kartalla olevista pumpuista (julkinen juomavesi haettiin kadulta yhteisistä pumpuista, jollei sitä tullut sisään talouksiin) on luonteva oletus tartuntojen lähtöpisteeksi?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ja sitten sama modernille kartalle, mistä voimme tehdä koneellisen tarkkaa etäisyyslaskentaa.</span>

<span class="kn">import</span> <span class="nn">folium</span>
<span class="kn">from</span> <span class="nn">folium.map</span> <span class="kn">import</span> <span class="n">Marker</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Kuolemien paikkatiedot listaksi, joka on helppo syöttää kartanpiirtoon.</span>

<span class="n">dat</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">kuolinluvut</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">kuolinluvut</span><span class="p">)):</span>
    <span class="n">dat</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">kuolinluvut</span><span class="p">[</span><span class="s1">&#39;X coordinate&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="n">kuolinluvut</span><span class="p">[</span><span class="s1">&#39;Y coordinate&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]]</span>

<span class="c1"># Pumppujen paikkatiedot samoin.</span>
    
<span class="n">kaivot</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">pumput</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">pumput</span><span class="p">)):</span>
    <span class="n">kaivot</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">pumput</span><span class="p">[</span><span class="s1">&#39;X coordinate&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="n">pumput</span><span class="p">[</span><span class="s1">&#39;Y coordinate&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]]</span>

<span class="c1"># Tässä päästäänkin jännän äärelle, kun halutaan laskea jokaisen kuolinpaikan lähin pumppu. Osaatko sanallistaa,</span>
<span class="c1"># mitä tässä vaiheessa ohjelma tekee? Mitä kussakin vaiheessa tapahtuu, noin ajatustasolla?</span>

<span class="n">closest</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">kuolinluvut</span><span class="p">)):</span>
    <span class="n">near</span> <span class="o">=</span> <span class="mi">1000</span>
    <span class="n">ind</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">kaivot</span><span class="p">)):</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">kuolinluvut</span><span class="p">[</span><span class="s1">&#39;X coordinate&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">pumput</span><span class="p">[</span><span class="s1">&#39;X coordinate&#39;</span><span class="p">][</span><span class="n">b</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> 
                   <span class="o">+</span> <span class="p">(</span><span class="n">kuolinluvut</span><span class="p">[</span><span class="s1">&#39;Y coordinate&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">pumput</span><span class="p">[</span><span class="s1">&#39;Y coordinate&#39;</span><span class="p">][</span><span class="n">b</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dist</span> <span class="o">&lt;</span> <span class="n">near</span><span class="p">:</span>
            <span class="n">near</span> <span class="o">=</span> <span class="n">dist</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">b</span>
    <span class="n">closest</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pumput</span><span class="p">[</span><span class="s1">&#39;Pump Name&#39;</span><span class="p">][</span><span class="n">ind</span><span class="p">])</span>
    
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tehdään kartta m</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">([</span><span class="mf">51.5135</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.137</span><span class="p">],</span> <span class="n">tiles</span><span class="o">=</span><span class="s1">&#39;stamentoner&#39;</span><span class="p">,</span> <span class="n">zoom_start</span><span class="o">=</span><span class="mi">17</span><span class="p">)</span>

<span class="c1"># Merkataan siihen kuolinpaikat, kunkin selitteeksi määrät ja lähimmän pumpun nimi.</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">kuolinluvut</span><span class="p">)):</span>
    <span class="n">Marker</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">popup</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;Kuolleita : &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">kuolinluvut</span><span class="p">[</span><span class="s2">&quot;Number of deaths&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span> 
                                <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;Lähin pumppu : &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">closest</span><span class="p">[</span><span class="n">i</span><span class="p">])),</span> 
           <span class="n">icon</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;purple&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

<span class="c1"># Merkataan myös kaivot selkeästi eri värillä.</span>
    
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">kaivot</span><span class="p">)):</span>
    <span class="n">Marker</span><span class="p">(</span><span class="n">kaivot</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">popup</span> <span class="o">=</span> <span class="n">pumput</span><span class="p">[</span><span class="s2">&quot;Pump Name&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> 
           <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;tint&#39;</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;fa&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

<span class="c1"># Näytetään kartta.</span>
<span class="n">m</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Vaikka tulos silmämääräisesti onkin aika selvä, vilkaistaas vielä jakaumaa tarkemmin.</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">closest</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="n">kuolinluvut</span><span class="p">[</span><span class="s1">&#39;Number of deaths&#39;</span><span class="p">],</span> <span class="n">align</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Kuolemat&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">closest</span><span class="p">,</span> <span class="n">align</span> <span class="o">=</span> <span class="s1">&#39;mid&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Taloudet&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;orange&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Kolerakuolemat Sohossa syksyllä 1854 lähimmän pumpun mukaan </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Tehtävä 3, haastava:</strong></p>
<p>Jos ohjelmointi tuntuu sujuvan, saatko piirrettyä karttamerkkejä päivä kerrallaan niin, että voit seurata tapauksien etenemistä?</p>
</div>
<div class="section" id="epilogi-kohti-sanitaarisempaa-nykypaivaa">
<h2>Epilogi - kohti sanitaarisempaa nykypäivää<a class="headerlink" href="#epilogi-kohti-sanitaarisempaa-nykypaivaa" title="Permalink to this headline">¶</a></h2>
<p>Snow, juostuaan nukkumatta kolmatta päivää, sai lopulta näillä tuloksillaan vakuutettua paikallisen komitean tilanteen luonteesta ja 8.9. aamusta Broad Streetin pumpusta poistettiin kahva niin ettei sitä voinut käyttää ja epidemia laantui. Tämä ei suoraan yhdistänyt koleraa miasman sijaan bakteereihin, mutta tämä yhteys saatiin jälkipyykissä paikallisen papin Henry Whiteheadin yhteyksien avulla selville: elokuun viimeisinä päivinä, koleraan sairastuneen vauvan vaipat oli pudotettu pumpun viereisen talon alla olleeseen likakaivoon, mistä bakteerit olivat seinähalkeamien kautta päässeet kaivon käyttämään pohjaveteen ja katastrofin ainekset olivat valmiit.</p>
<p>Vaikka mikrobiteorian tuominen yleiseen elämään ja sairaanhoitoon veikin vielä kauan, tapauksen jälkeen oli selvää kaikille, että yleisen hygieniatason oli noustava ja nopeasti. Ympäri maailmaa seurasi valtavia viemäritöitä, joissa kokonaisia kaupunkeja nostettiin juuriltaan (<a class="reference external" href="https://en.wikipedia.org/wiki/Raising_of_Chicago">Chicagossa</a> kirjaimellisesti, taloja tunkattiin ylös kokonaisina ja putket vedettiin kaupungin alle) ja jätteen poistuminen kaduilta pelasti miljoonia ihmishenkiä.</p>
<p>Kolera ja sen kaltaiset taudit ovat länsimaissa harvinaisia, mutta taistelu niitä vastaan jatkuu yhä köyhemmillä alueilla. Tuoreena esimerkkinä lokakuussa 2010 Haitilla, vajaa vuosi sen jälkeen kun maanjäristykset tappoivat 200000 ihmistä, raportoitiin yli 665000 koleratapausta ja 8183 kuollutta. Kansainvälinen tuki ja infrastruktuurin rakentaminen alusta asti kunnolla on äärimäisen tärkeää näillä alueilla, jotta mahdollisimman monille voidaan taata inhimillisemmät elinolot.</p>
</div>
<div class="section" id="lisaa-luettavaa">
<h2>Lisää luettavaa:<a class="headerlink" href="#lisaa-luettavaa" title="Permalink to this headline">¶</a></h2>
<p>Huldén, Lena (2006): Kuusijalkainen vihollinen</p>
<p>https://en.wikipedia.org/wiki/1854_Broad_Street_cholera_outbreak</p>
<p>https://www.cdc.gov/cholera/haiti/index.html</p>
<p>http://blog.rtwilson.com/john-snows-cholera-data-in-more-formats/</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./harjoitukset"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="lyhimman_reitin_analyysi.html" title="previous page">Lyhimmän reitin analyysi</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          Tekijä HIP Education and Open Data Team<br/>
        
          <div class="extra_footer">
            <div>
<a>Toteutettu Opetushallituksen valtionavustuksella tiedekasvatuksen edistämiseen.</a></br><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img class="license" alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a> Tämän sivuston materiaali on käytettävissä seuraavalla lisenssillä: <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC-BY 4.0.</a>
</div>    

          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>